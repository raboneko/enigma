using Gtk 4.0;
using libhelium 1;

template EnigmaMainWindow : libhelium.ApplicationWindow {
  default-width: "800";
  default-height: "600";

  Box main_box {
    orientation: vertical;

    libhelium.AppBar title {
      flat: true;
      show-buttons: true;

      MenuButton menu_button {
        icon-name: "open-menu-symbolic";
      }

      ToggleButton search_button {
        icon-name: "system-search-symbolic";
      }
    }

    libhelium.ViewMono file_view {
      vexpand: true;
      title: bind EnigmaMainWindow.file_name;

      styles [
        "eni-view"
      ]

      Revealer search_revealer {
        reveal-child: bind search_button.active;

        SearchEntry search_entry {
          placeholder-text: "Search textâ€¦";
          halign: start;
          search-changed => on_search_activate();
        }
      }

      TextView text_box {
        vexpand: true;
        wrap-mode: word;
        left-margin: 18;
        right-margin: 18;
        top-margin: 18;
        bottom-margin: 18;
        pixels-above-lines: 3;
        pixels-inside-wrap: 3;
      }
    }

    libhelium.BottomBar {
      title: bind EnigmaMainWindow.file_name_ext;
      description: bind EnigmaMainWindow.file_line_count;
      
      [left]
      libhelium.IconicButton new_button {
        icon: "document-new-symbolic";
      }

      [left]
      libhelium.IconicButton open_button {
        icon: "document-open-symbolic";
      }

      [left]
      libhelium.IconicButton save_as_button {
        icon: "document-save-as-symbolic";
      }
    }
  }
}
